{"version":3,"sources":["redux/types.tsx","redux/actions.tsx","components/MainMapGl.tsx","App.tsx","components/MainMapStyle.ts","components/MapComponents/MapRouteInfo.tsx","components/MapComponents/MapInputAdress.tsx","components/MapComponents/MapPointDataError.tsx","components/MapComponents/MapRouteBind.tsx","components/MapServiceFunctions.tsx","redux/massdkReducer.tsx","redux/massrouteReducer.tsx","redux/mapReducer.tsx","redux/rootReducer.tsx","index.tsx"],"names":["MASSDK_CREATE","MAP_CREATE","MASSROUTE_CREATE","massrouteCreate","massRouter","type","data","activeRoute","dateMapGl","styleApp01","fontSize","marginRight","width","maxHeight","minHeight","backgroundColor","color","textTransform","styleTypography","textAlign","styleModalEnd","position","top","left","right","height","styleSetInf","marginTop","marginLeft","bgcolor","border","borderColor","borderRadius","boxShadow","p","styleSetPoint","styleModalEndMapGl","styleModalMenu","marginBottom","styleSet","styleInpKnop","maxWidth","minWidth","styleSetAdress","styleBoxForm","MapRouteInfo","props","React","openSetInf","setOpenSetInf","handleCloseSetEndInf","setOpen","dlRoute1","tmRoute1","Math","round","properties","get","value","tm","text","substring","length","console","log","Modal","open","onClose","hideBackdrop","Box","sx","Button","onClick","name1","name2","MapInputAdress","massdk","useSelector","state","massdkReducer","openSetAdress","setOpenSetAdress","iPoint","nameCoordinates","valuen","setValuen","handleCloseSetAdr","Grid","item","container","xs","component","noValidate","autoComplete","TextField","size","onKeyPress","event","key","preventDefault","inputProps","style","onChange","target","variant","MapPointDataError","openSetEr","setOpenSetEr","reason","Typography","sErr","MapRouteBind","openSetBind","setOpenSetBind","handleCloseSetEndBind","DecodingCoord","coord","split","map","Number","CodingCoord","String","getPointData","index","pointAaIndex","pointBbIndex","textBalloon","hintContent","iconContent","getPointOptions","colorBalloon","newCoordinates","preset","getReferencePoints","pointA","pointB","referencePoints","massOtladka","region","start","stop","time","coordinates","coordStart","coordStop","coordStartIn","coordStopIn","massRoute","dateMap","flagOpen","propsOpen","flagPusk","flagRoute","flagBind","flagDemo","chNewCoord","pointCenter","pointCenterOld","pointAa","pointBb","indexPoint","soobError","MainMap","massroute","massrouteReducer","mapReducer","tflight","dispatch","useDispatch","i","masskPoint","ID","area","subarea","mass","points","Y","X","description","num","push","splice","aY","aX","bY","bX","coord0","coord1","CenterCoord","boxPoint","point0","point1","massdkCreate","zoom","setZoom","openSet","setOpenSet","ZeroRoute","setSize","window","innerWidth","random","MakeRecordMassRoute","flDubl","pointAcod","pointBcod","masskRoute","RecordMassRoute","mapState","center","yandexMapDisablePoiInteractivity","MapGl","mapp","pointAA","pointa","pointBB","pointb","MakeRoute","OnPlacemarkClickPoint","MakeСollectionRoute","ModalPressBalloon","openSetErBall","setOpenSetErBall","pointRoute","StrokaPressBalloon","soob","mode","param","massRouteRab","coordPoint","handleClose","query","apikey","lang","modules","instanceRef","ref","current","events","add","e","hint","coords","MapNewPoint","originalEvent","button","getZoom","onLoad","ymaps","multiRoute","multiRouter","MultiRoute","routeActiveStrokeWidth","routeStrokeWidth","massPolyRoute","Polyline","balloonContent","balloonCloseButton","strokeColor","strokeWidth","geoObjects","massMultiRoute","routeStrokeStyle","massMultiRouteIn","routeActiveStrokeColor","model","getActiveRoute","coordinate","idx","geometry","options","float","provider","updateSize","addEventListener","removeEventListener","StrokaMenuGlob","pa","PressMenuButton","flagOpenWS","WS","App","host","location","pathname","search","WebSocket","useEffect","onopen","onclose","onerror","onmessage","allData","JSON","parse","intialState","rootReducer","combineReducers","action","store","createStore","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.90b1046b.chunk.js","sourcesContent":["// export const INCREMENT = 'INCREMENT';\r\n// export const DECREMENT = 'DECREMENT';\r\n// export const INPUT_TEXT = 'INPUT_TEXT';\r\nexport const COMM_CREATE = 'COMM_CREATE';\r\nexport const MASSDK_CREATE = 'MASSDK_CREATE';\r\nexport const MAP_CREATE = 'MAP_CREATE';\r\nexport const MASSROUTE_CREATE = 'MASSROUTE_CREATE';\r\n","//import { INCREMENT, DECREMENT, INPUT_TEXT, COMM_CREATE, MASSFAZ_CREATE } from './types';\r\nimport {\r\n  MAP_CREATE,\r\n  //COMM_CREATE,\r\n  MASSDK_CREATE,\r\n  MASSROUTE_CREATE,\r\n} from \"./types\";\r\n\r\n//import { DateRPU } from './../interfaceRPU.d';\r\nimport { DateMAP } from \"./../interfaceMAP.d\";\r\n//import { Tflight } from './../interfaceMAP.d';\r\nimport { Pointer } from \"./../App\";\r\nimport { Router } from \"./../App\";\r\n\r\n// export function incrementLikes() {\r\n//   return {\r\n//     type: INCREMENT,\r\n//   };\r\n// }\r\n\r\n// export function decrementLikes() {\r\n//   return {\r\n//     type: DECREMENT,\r\n//   };\r\n// }\r\n\r\n// export function commCreate(dateRpu: DateRPU) {\r\n//   return {\r\n//     type: COMM_CREATE,\r\n//     data: { dateRpu },\r\n//   };\r\n// }\r\n\r\nexport function massdkCreate(massDka: Pointer[] = []) {\r\n  return {\r\n    type: MASSDK_CREATE,\r\n    data: massDka,\r\n  };\r\n}\r\n\r\nexport function mapCreate(dateMap: DateMAP) {\r\n  //export function mapCreate(dateMap: Tflight[]) {\r\n  return {\r\n    type: MAP_CREATE,\r\n    data: { dateMap },\r\n  };\r\n}\r\n\r\nexport function massrouteCreate(massRouter: Router[] = []) {\r\n  return {\r\n    type: MASSROUTE_CREATE,\r\n    data: massRouter,\r\n  };\r\n}\r\n","import * as React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { massdkCreate, massrouteCreate } from \"./../redux/actions\";\r\n\r\nimport Grid from \"@mui/material/Grid\";\r\nimport Box from \"@mui/material/Box\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Modal from \"@mui/material/Modal\";\r\nimport Typography from \"@mui/material/Typography\";\r\n\r\nimport { YMaps, Map, Placemark, FullscreenControl } from \"react-yandex-maps\";\r\nimport { GeolocationControl } from \"react-yandex-maps\";\r\nimport { RulerControl, SearchControl } from \"react-yandex-maps\";\r\nimport { TrafficControl, TypeSelector, ZoomControl } from \"react-yandex-maps\";\r\n\r\nimport MapRouteInfo from \"./MapComponents/MapRouteInfo\";\r\nimport MapInputAdress from \"./MapComponents/MapInputAdress\";\r\nimport MapPointDataError from \"./MapComponents/MapPointDataError\";\r\nimport MapRouteBind from \"./MapComponents/MapRouteBind\";\r\n\r\nimport { MapNewPoint, RecordMassRoute } from \"./MapServiceFunctions\";\r\nimport { DecodingCoord, CodingCoord } from \"./MapServiceFunctions\";\r\nimport { getMultiRouteOptions } from \"./MapServiceFunctions\";\r\nimport { getReferencePoints, CenterCoord } from \"./MapServiceFunctions\";\r\nimport { getMassPolyRouteOptions } from \"./MapServiceFunctions\";\r\nimport { getMassMultiRouteOptions } from \"./MapServiceFunctions\";\r\nimport { getMassMultiRouteInOptions } from \"./MapServiceFunctions\";\r\nimport { getPointData, getPointOptions } from \"./MapServiceFunctions\";\r\nimport { massOtladka } from \"./MapServiceFunctions\";\r\n\r\nimport { styleSetPoint, styleTypography } from \"./MainMapStyle\";\r\nimport { styleApp01, styleModalEndMapGl, styleModalMenu } from \"./MainMapStyle\";\r\n\r\nimport { Tflight } from \"./../interfaceMAP.d\";\r\nimport { Pointer } from \"./../App\";\r\n\r\nlet coordinates: Array<Array<number>> = [[]]; // массив координат\r\nlet coordStart: any = []; // рабочий массив коллекции входящих связей\r\nlet coordStop: any = []; // рабочий массив коллекции входящих связей\r\nlet coordStartIn: any = []; // рабочий массив коллекции исходящих связей\r\nlet coordStopIn: any = []; // рабочий массив коллекции исходящих связей\r\nlet massRoute: any = []; // рабочий массив сети связей\r\n\r\nlet dateMap: Tflight[] = [{} as Tflight];\r\nlet flagOpen = false;\r\nlet propsOpen = true;\r\nlet flagPusk = false;\r\nlet flagRoute = false;\r\nlet flagBind = false;\r\nlet flagDemo = false;\r\nlet chNewCoord = 1;\r\nlet activeRoute: any;\r\n\r\nlet pointCenter: any = 0;\r\nlet pointCenterOld: any = 0;\r\nlet pointA: any = 0;\r\nlet pointAa: any = 0;\r\nlet pointB: any = 0;\r\nlet pointBb: any = 0;\r\nlet indexPoint: number = -1;\r\nlet pointAaIndex: number = -1;\r\nlet pointBbIndex: number = -1;\r\nlet soobError = \"\";\r\n\r\n//const MainMap = (props: { open: boolean; Y: number; X: number }) => {\r\nconst MainMap = () => {\r\n  //== Piece of Redux =======================================\r\n  let massdk = useSelector((state: any) => {\r\n    const { massdkReducer } = state;\r\n    return massdkReducer.massdk;\r\n  });\r\n  let massroute = useSelector((state: any) => {\r\n    const { massrouteReducer } = state;\r\n    return massrouteReducer.massroute;\r\n  });\r\n  const map = useSelector((state: any) => {\r\n    const { mapReducer } = state;\r\n    return mapReducer.map;\r\n  });\r\n  if (map) {\r\n    dateMap = map.dateMap.tflight;\r\n    propsOpen = false;\r\n  }\r\n  const dispatch = useDispatch();\r\n  //=== инициализация ======================================\r\n  if (!flagOpen && !propsOpen) {\r\n    for (let i = 0; i < dateMap.length; i++) {\r\n      let masskPoint: Pointer = {\r\n        ID: -1,\r\n        coordinates: [],\r\n        nameCoordinates: \"\",\r\n        region: \"\",\r\n        area: \"\",\r\n        subarea: 0,\r\n        newCoordinates: 0,\r\n      };\r\n      let mass = [0, 0];\r\n      mass[0] = dateMap[i].points.Y;\r\n      mass[1] = dateMap[i].points.X;\r\n      masskPoint.ID = dateMap[i].ID;\r\n      masskPoint.coordinates = mass;\r\n      masskPoint.nameCoordinates = dateMap[i].description;\r\n      masskPoint.region = dateMap[i].region.num;\r\n      masskPoint.area = dateMap[i].area.num;\r\n      masskPoint.subarea = dateMap[i].subarea;\r\n      masskPoint.newCoordinates = 0;\r\n\r\n      massdk.push(masskPoint);\r\n      coordinates.push(mass);\r\n    }\r\n    coordinates.splice(0, 1);\r\n    pointCenter = CenterCoord(\r\n      map.dateMap.boxPoint.point0.Y,\r\n      map.dateMap.boxPoint.point0.X,\r\n      map.dateMap.boxPoint.point1.Y,\r\n      map.dateMap.boxPoint.point1.X\r\n    );\r\n    pointCenterOld = pointCenter;\r\n    flagOpen = true;\r\n    massroute = massOtladka; // костыль, потом убрать\r\n    dispatch(massdkCreate(massdk));\r\n    dispatch(massrouteCreate(massroute));\r\n  }\r\n  //========================================================\r\n  const [zoom, setZoom] = React.useState<number>(9.5);\r\n  const [openSetInf, setOpenSetInf] = React.useState(false);\r\n  const [openSetEr, setOpenSetEr] = React.useState(false);\r\n  const [openSetBind, setOpenSetBind] = React.useState(false);\r\n  const [openSet, setOpenSet] = React.useState(false);\r\n  const [openSetAdress, setOpenSetAdress] = React.useState(false);\r\n\r\n  const ZeroRoute = () => {\r\n    pointA = 0;\r\n    pointB = 0;\r\n    pointAa = 0;\r\n    pointBb = 0;\r\n    pointAaIndex = -1;\r\n    pointBbIndex = -1;\r\n    coordStart = [];\r\n    coordStop = [];\r\n    coordStartIn = [];\r\n    coordStopIn = [];\r\n    flagRoute = false;\r\n    flagBind = false;\r\n    pointCenter = pointCenterOld;\r\n    setSize(window.innerWidth + Math.random());\r\n  };\r\n\r\n  const MakeRecordMassRoute = () => {\r\n    let flDubl = false;\r\n    let pointAcod = CodingCoord(pointA);\r\n    let pointBcod = CodingCoord(pointB);\r\n    for (let i = 0; i < massroute.length; i++) {\r\n      if (massroute[i].start === pointAcod && massroute[i].stop === pointBcod)\r\n        flDubl = true;\r\n    }\r\n    if (flDubl) {\r\n      soobError = \"Не сохранено - дубликатная связь\";\r\n      setOpenSetEr(true);\r\n    } else {\r\n      massroute.push(RecordMassRoute(pointAcod, pointBcod, activeRoute));\r\n      ZeroRoute();\r\n    }\r\n  };\r\n\r\n  const PressMenuButton = (mode: number) => {\r\n    switch (mode) {\r\n      case 3: // режим включения Demo сети связей\r\n        massRoute = massroute;\r\n        flagDemo = true;\r\n        setSize(window.innerWidth + Math.random());\r\n        break;\r\n      case 6: // режим отмены Demo сети связей\r\n        massRoute = [];\r\n        flagDemo = false;\r\n        setSize(window.innerWidth + Math.random());\r\n        break;\r\n      case 12: // реверс маршрута\r\n        let pa = pointA;\r\n        pointA = pointB;\r\n        pointB = pa;\r\n        pa = pointAa;\r\n        pointAa = pointBb;\r\n        pointBb = pa;\r\n        pa = pointAaIndex;\r\n        pointAaIndex = pointBbIndex;\r\n        pointBbIndex = pa;\r\n        setSize(window.innerWidth + Math.random());\r\n        break;\r\n      case 21: // сохранение маршрута\r\n        MakeRecordMassRoute();\r\n        flagPusk = false;\r\n        break;\r\n      case 33: // привязка направлений\r\n        flagBind = true;\r\n        setOpenSetBind(true);\r\n        break;\r\n      case 69: // инфа о маршруте\r\n        if (activeRoute) setOpenSetInf(true);\r\n        break;\r\n      case 77: // удаление маршрута\r\n        ZeroRoute();\r\n    }\r\n  };\r\n\r\n  const mapState = {\r\n    center: pointCenter,\r\n    zoom, //autoFitToViewport: true, behaviors: [\"default\", \"scrollZoom\"], controls: [],\r\n    yandexMapDisablePoiInteractivity: true,\r\n  };\r\n\r\n  const MapGl = (props: { pointa: any; pointb: any }) => {\r\n    const mapp = React.useRef<any>(null);\r\n    let pointAA = props.pointa;\r\n    let pointBB = props.pointb;\r\n\r\n    const MakeRoute = () => {\r\n      pointA = pointAa; // === Запуск создания связи ===\r\n      pointB = pointBb;\r\n      flagRoute = true;\r\n      setSize(window.innerWidth + Math.random());\r\n    };\r\n\r\n    const addRoute = (ymaps: any) => {\r\n      const multiRoute = new ymaps.multiRouter.MultiRoute(\r\n        getReferencePoints(pointAA, pointBB),\r\n        getMultiRouteOptions()\r\n      );\r\n      let massPolyRoute: any = []; // cеть связей\r\n      for (let i = 0; i < massRoute.length; i++) {\r\n        massPolyRoute[i] = new ymaps.Polyline(\r\n          [DecodingCoord(massRoute[i].start), DecodingCoord(massRoute[i].stop)],\r\n          { balloonContent: \"Ломаная линия\" },\r\n          getMassPolyRouteOptions()\r\n        );\r\n        mapp.current.geoObjects.add(massPolyRoute[i]);\r\n      }\r\n      let massMultiRoute: any = []; // исходящие связи\r\n      for (let i = 0; i < coordStart.length; i++) {\r\n        massMultiRoute[i] = new ymaps.multiRouter.MultiRoute(\r\n          getReferencePoints(coordStart[i], coordStop[i]),\r\n          getMassMultiRouteOptions()\r\n        );\r\n        mapp.current.geoObjects.add(massMultiRoute[i]);\r\n      }\r\n      let massMultiRouteIn: any = []; // входящие связи\r\n      for (let i = 0; i < coordStartIn.length; i++) {\r\n        massMultiRouteIn[i] = new ymaps.multiRouter.MultiRoute(\r\n          getReferencePoints(coordStartIn[i], coordStopIn[i]),\r\n          getMassMultiRouteInOptions()\r\n        );\r\n        mapp.current.geoObjects.add(massMultiRouteIn[i]);\r\n      }\r\n      mapp.current.geoObjects.add(multiRoute); // основная связь\r\n      multiRoute.model.events.add(\"requestsuccess\", function () {\r\n        activeRoute = multiRoute.getActiveRoute();\r\n      });\r\n    };\r\n\r\n    const MakeСollectionRoute = () => {\r\n      for (let i = 0; i < massroute.length; i++) {\r\n        if (massroute[i].start === CodingCoord(pointAa)) {\r\n          coordStart.push(pointAa); // исходящие связи\r\n          coordStop.push(DecodingCoord(massroute[i].stop));\r\n        }\r\n        if (massroute[i].stop === CodingCoord(pointAa)) {\r\n          coordStartIn.push(DecodingCoord(massroute[i].start)); // входящие связи\r\n          coordStopIn.push(pointAa);\r\n        }\r\n      }\r\n    };\r\n\r\n    const OnPlacemarkClickPoint = (index: number) => {\r\n      pointCenter = pointCenterOld;\r\n      if (pointAa === 0) {\r\n        pointAaIndex = index; // начальная точка\r\n        pointAa = [massdk[index].coordinates[0], massdk[index].coordinates[1]];\r\n        MakeСollectionRoute();\r\n        flagPusk = true;\r\n        setSize(window.innerWidth + Math.random());\r\n      } else {\r\n        if (pointBb === 0) {\r\n          if (pointAaIndex === index) {\r\n            soobError = \"Начальная и конечная точки совпадают\";\r\n            setOpenSetEr(true);\r\n          } else {\r\n            pointBbIndex = index; // конечная точка\r\n            pointBb = [\r\n              massdk[index].coordinates[0],\r\n              massdk[index].coordinates[1],\r\n            ];\r\n            MakeRoute();\r\n          }\r\n        } else {\r\n          indexPoint = index;\r\n          setOpenSet(true); // в меню работы с точками\r\n        }\r\n      }\r\n    };\r\n\r\n    const ModalPressBalloon = () => {\r\n      const [openSetErBall, setOpenSetErBall] = React.useState(false);\r\n      let pointRoute: any = 0;\r\n\r\n      if (indexPoint >= 0 && indexPoint < massdk.length) {\r\n        pointRoute = [\r\n          massdk[indexPoint].coordinates[0],\r\n          massdk[indexPoint].coordinates[1],\r\n        ];\r\n      }\r\n\r\n      const handleClose = (param: number) => {\r\n        switch (param) {\r\n          case 1: // Начальная точка\r\n            if (pointBbIndex === indexPoint) {\r\n              soobError = \"Начальная и конечная точки совпадают\";\r\n              setOpenSetErBall(true);\r\n            } else {\r\n              pointAaIndex = indexPoint;\r\n              pointAa = pointRoute;\r\n              MakeRoute();\r\n            }\r\n            break;\r\n          case 2: // Конечная точка\r\n            if (pointAaIndex === indexPoint) {\r\n              soobError = \"Начальная и конечная точки совпадают\";\r\n              setOpenSetErBall(true);\r\n            } else {\r\n              pointBbIndex = indexPoint;\r\n              pointBb = pointRoute;\r\n              MakeRoute();\r\n            }\r\n            break;\r\n          case 3: // Удаление точки\r\n            if (pointAaIndex === indexPoint || pointBbIndex === indexPoint) {\r\n              soobError = \"Начальную и конечную точки удалять нельзя\";\r\n              setOpenSetErBall(true);\r\n            } else {\r\n              let massRouteRab: any = []; // удаление из массива сети связей\r\n              let coordPoint: any = CodingCoord(coordinates[indexPoint]);\r\n              for (let i = 0; i < massroute.length; i++) {\r\n                if (\r\n                  coordPoint !== massroute[i].start &&\r\n                  coordPoint !== massroute[i].stop\r\n                )\r\n                  massRouteRab.push(massroute[i]);\r\n              }\r\n              massroute.splice(0, massroute.length); // massroute = [];\r\n              massroute = massRouteRab;\r\n              massRoute = massroute;\r\n              dispatch(massrouteCreate(massroute));\r\n              coordStart = []; // удаление колекции связей\r\n              coordStop = [];\r\n              coordStartIn = [];\r\n              coordStopIn = [];\r\n              massdk.splice(indexPoint, 1); // удаление самой точки\r\n              coordinates.splice(indexPoint, 1);\r\n              setOpenSet(false);\r\n              pointCenter = pointCenterOld;\r\n              setSize(window.innerWidth + Math.random());\r\n            }\r\n            break;\r\n          case 4: // Редактирование адреса\r\n            setOpenSetAdress(true);\r\n        }\r\n      };\r\n\r\n      const StrokaPressBalloon = (soob: string, mode: number) => {\r\n        return (\r\n          <Button sx={styleModalMenu} onClick={() => handleClose(mode)}>\r\n            <b>{soob}</b>\r\n          </Button>\r\n        );\r\n      };\r\n\r\n      return (\r\n        <Modal open={openSet} onClose={() => setOpenSet(false)} hideBackdrop>\r\n          <Box sx={styleSetPoint}>\r\n            <Button sx={styleModalEndMapGl} onClick={() => setOpenSet(false)}>\r\n              <b>&#10006;</b>\r\n            </Button>\r\n            <Box sx={{ marginTop: 2, textAlign: \"center\" }}>\r\n              {StrokaPressBalloon(\"Удаление точки\", 3)}\r\n              {StrokaPressBalloon(\"Редактирование адреса\", 4)}\r\n            </Box>\r\n            <Typography variant=\"h6\" sx={styleTypography}>\r\n              Перестроение связи:\r\n            </Typography>\r\n            <Box sx={{ textAlign: \"center\" }}>\r\n              {StrokaPressBalloon(\"Начальная точка\", 1)}\r\n              {StrokaPressBalloon(\"Конечная точка\", 2)}\r\n            </Box>\r\n            {openSetAdress && (\r\n              <MapInputAdress iPoint={indexPoint} setOpen={setOpenSetAdress} />\r\n            )}\r\n            {openSetErBall && (\r\n              <MapPointDataError sErr={soobError} setOpen={setOpenSetErBall} />\r\n            )}\r\n          </Box>\r\n        </Modal>\r\n      );\r\n    };\r\n\r\n    return (\r\n      <YMaps\r\n        query={{\r\n          apikey: \"65162f5f-2d15-41d1-a881-6c1acf34cfa1\", // \"b9f13766-acdb-46cd-a2a1-fc790dd80cec\",\r\n          lang: \"ru_RU\",\r\n        }}\r\n      >\r\n        <Map\r\n          modules={[\"multiRouter.MultiRoute\", \"Polyline\"]}\r\n          state={mapState}\r\n          instanceRef={(ref) => {\r\n            if (ref) {\r\n              mapp.current = ref;\r\n              mapp.current.events.add(\"contextmenu\", function (e: any) {\r\n                // нажата правая кнопка мыши (создание новой точки)\r\n                if (mapp.current.hint) {\r\n                  massdk.push(MapNewPoint(e.get(\"coords\"), chNewCoord++));\r\n                  coordinates.push(e.get(\"coords\"));\r\n                  setSize(window.innerWidth + Math.random());\r\n                }\r\n              });\r\n              mapp.current.events.add(\"mousedown\", function (e: any) {\r\n                // нажата левая/правая кнопка мыши 0, 1 или 2 в зависимости от того, какая кнопка мыши нажата (В IE значение может быть от 0 до 7).\r\n                if (e.get(\"domEvent\").originalEvent.button === 0) {\r\n                  pointCenterOld = pointCenter;\r\n                  pointCenter = e.get(\"coords\");\r\n                }\r\n              });\r\n              mapp.current.events.add([\"boundschange\"], function () {\r\n                setZoom(mapp.current.getZoom()); // покрутили колёсико мыши\r\n              });\r\n            }\r\n          }}\r\n          onLoad={addRoute}\r\n          width={\"99.8%\"}\r\n          height={\"97%\"}\r\n        >\r\n          {coordinates.map((coordinate, idx) => (\r\n            <Placemark\r\n              key={idx}\r\n              geometry={coordinate}\r\n              properties={getPointData(idx, pointAaIndex, pointBbIndex, massdk)}\r\n              options={getPointOptions(idx, pointAaIndex, pointBbIndex, massdk)}\r\n              modules={[\"geoObject.addon.balloon\", \"geoObject.addon.hint\"]}\r\n              onClick={() => OnPlacemarkClickPoint(idx)}\r\n            />\r\n          ))}\r\n          <FullscreenControl />\r\n          <GeolocationControl options={{ float: \"left\" }} />\r\n          <RulerControl options={{ float: \"right\" }} />\r\n          <SearchControl\r\n            options={{\r\n              float: \"left\",\r\n              provider: \"yandex#search\",\r\n              size: \"large\",\r\n            }}\r\n          />\r\n          <TrafficControl options={{ float: \"right\" }} />\r\n          <TypeSelector options={{ float: \"right\" }} />\r\n          <ZoomControl options={{ float: \"right\" }} />\r\n          {/* служебные компоненты */}\r\n          <ModalPressBalloon />\r\n          {openSetEr && (\r\n            <MapPointDataError sErr={soobError} setOpen={setOpenSetEr} />\r\n          )}\r\n          {openSetInf && (\r\n            <MapRouteInfo\r\n              activeRoute={activeRoute}\r\n              name1={massdk[pointAaIndex].nameCoordinates}\r\n              name2={massdk[pointBbIndex].nameCoordinates}\r\n              setOpen={setOpenSetInf}\r\n            />\r\n          )}\r\n          {openSetBind && <MapRouteBind setOpen={setOpenSetBind} />}\r\n        </Map>\r\n      </YMaps>\r\n    );\r\n  };\r\n\r\n  //отслеживание изменения размера экрана - костыль, делает ререндер\r\n  const [size, setSize] = React.useState(0);\r\n  React.useLayoutEffect(() => {\r\n    function updateSize() {\r\n      setSize(window.innerWidth);\r\n    }\r\n    window.addEventListener(\"resize\", updateSize);\r\n    updateSize();\r\n    return () => window.removeEventListener(\"resize\", updateSize);\r\n  }, []);\r\n\r\n  const StrokaMenuGlob = (soob: string, mode: number) => {\r\n    return (\r\n      <Button sx={styleApp01} onClick={() => PressMenuButton(mode)}>\r\n        <b>{soob}</b>\r\n      </Button>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Grid container sx={{ height: \"99.5vh\" }}>\r\n      {flagPusk && !flagBind && <>{StrokaMenuGlob(\"Отмена назначений\", 77)}</>}\r\n      {flagPusk && flagRoute && !flagBind && (\r\n        <>\r\n          {StrokaMenuGlob(\"Привязка направлен\", 33)}\r\n          {StrokaMenuGlob(\"Реверс связи\", 12)}\r\n          {StrokaMenuGlob(\"Информ о связи\", 69)}\r\n        </>\r\n      )}\r\n      {flagPusk && flagRoute && flagBind && (\r\n        <>\r\n          {StrokaMenuGlob(\"Сохранить связь\", 21)}\r\n          {StrokaMenuGlob(\"Отменить связь\", 77)}\r\n          {StrokaMenuGlob(\"Информ о связи\", 69)}\r\n        </>\r\n      )}\r\n      {!flagDemo && <>{StrokaMenuGlob(\"Demo сети\", 3)}</>}\r\n      {flagDemo && <>{StrokaMenuGlob(\"Конец Demo\", 6)}</>}\r\n      {!propsOpen && <MapGl pointa={pointA} pointb={pointB} />}\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default MainMap;\r\n","import React from \"react\";\r\nimport {\r\n  useDispatch,\r\n  //useSelector\r\n} from \"react-redux\";\r\nimport {\r\n  mapCreate,\r\n  //commCreate,\r\n  // massdkCreate\r\n} from \"./redux/actions\";\r\n\r\nimport Grid from \"@mui/material/Grid\";\r\n\r\nimport MainMap from \"./components/MainMapGl\";\r\n//import { CenterCoord } from \"./components/MapServiceFunctions\";\r\n\r\n//import { DateRPU } from \"./interfaceRPU.d\";\r\n//import { dataRpu } from \"./otladkaRpuData\";\r\n\r\nimport { DateMAP } from \"./interfaceMAP.d\";\r\n//import { Tflight } from \"./interfaceMAP.d\";\r\nimport { dataMap } from \"./otladkaMaps\";\r\n\r\n//export let dateRpuGl: DateRPU = {} as DateRPU;\r\n//export let dateMapGl: Tflight[] = [];\r\n//export let dateMapGl: Tflight[] = [{} as Tflight];\r\n//export let dateMapGl: DateMAP;\r\nexport let dateMapGl: any;\r\n\r\nexport interface Pointer {\r\n  ID: number;\r\n  coordinates: Array<number>;\r\n  nameCoordinates: string;\r\n  region: string;\r\n  area: string;\r\n  subarea: number;\r\n  newCoordinates: number;\r\n}\r\nexport let massDk: Pointer[] = [];\r\n\r\nexport interface Router {\r\n  region: number;\r\n  start: string;\r\n  stop: string;\r\n  length: number;\r\n  time: number;\r\n}\r\nexport let massRoute: Router[] = [];\r\n\r\nlet flagOpen = true;\r\n\r\nlet flagOpenWS = true;\r\n//let flagWS = true;\r\nlet WS: any = null;\r\n\r\nconst App = () => {\r\n  //== Piece of Redux ======================================\r\n  // const comm = useSelector((state: any) => {\r\n  //   const { commReducer } = state;\r\n  //   return commReducer.comm;\r\n  // });\r\n  // //console.log('comm_App:', comm);\r\n\r\n  // const map = useSelector((state: any) => {\r\n  //   const { mapReducer } = state;\r\n  //   return mapReducer.map;\r\n  // });\r\n  //console.log(\"map_App:\", map);\r\n\r\n  // const massdk = useSelector((state: any) => {\r\n  //   const { massdkReducer } = state;\r\n  //   return massdkReducer.massdk;\r\n  // });\r\n  //console.log(\"massdk_App:\", massdk);\r\n\r\n  const dispatch = useDispatch();\r\n  //========================================================\r\n\r\n  //const host = \"wss://192.168.115.25/mapW\";\r\n  //const host = \"wss://192.168.115.25/user/andrey_omsk/graphManageW\";\r\n  const host =\r\n    \"wss://\" +\r\n    window.location.host +\r\n    window.location.pathname +\r\n    \"W\" +\r\n    window.location.search;\r\n\r\n  if (flagOpenWS) {\r\n    WS = new WebSocket(host);\r\n    flagOpenWS = false;\r\n    console.log(\"WS:\", WS);\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    WS.onopen = function (event: any) {\r\n      console.log(\"WS.current.onopen:\", event);\r\n    };\r\n\r\n    WS.onclose = function (event: any) {\r\n      console.log(\"WS.current.onclose:\", event);\r\n    };\r\n\r\n    WS.onerror = function (event: any) {\r\n      console.log(\"WS.current.onerror:\", event);\r\n    };\r\n\r\n    WS.onmessage = function (event: any) {\r\n      let allData = JSON.parse(event.data);\r\n      let data: DateMAP = allData.data;\r\n      console.log(\"пришло:\", allData.type, data);\r\n      switch (allData.type) {\r\n        case \"mapInfo\":\r\n          console.log(\"mapInfo:\", data);\r\n          dateMapGl = data;\r\n          dispatch(mapCreate(dateMapGl));\r\n          break;\r\n        case \"graphInfo\":\r\n          console.log(\"graphInfo:\", data);\r\n          // dateMapGl = dataMap.tflight;\r\n          // dispatch(mapCreate(dateMapGl));\r\n          break;\r\n        default:\r\n          console.log(\"data_default:\", data);\r\n      }\r\n    };\r\n  }, [dispatch]);\r\n\r\n  // для отладки\r\n  // if (flagOpen) {\r\n  //   dateMapGl = dataMap;\r\n  //   dispatch(mapCreate(dateMapGl));\r\n  //   flagOpen = false;\r\n  // }\r\n\r\n  return (\r\n    <Grid container sx={{ height: \"100vh\", width: \"100%\", bgcolor: \"#F1F5FB\" }}>\r\n      <Grid item xs>\r\n        <MainMap />\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","export const styleApp01 = {\r\n  fontSize: 14,\r\n  marginRight: 0.5,\r\n  width: '19%',\r\n  maxHeight: '21px',\r\n  minHeight: '21px',\r\n  //backgroundColor: '#F1F3F4',\r\n  backgroundColor: '#E6F5D6',\r\n  color: 'black',\r\n  textTransform: 'unset !important',\r\n};\r\n\r\nexport const styleTypography = {\r\n  textAlign: \"center\", \r\n  color: \"#5B1080\"\r\n};\r\n\r\n\r\nexport const styleModalEnd = {\r\n  position: 'absolute',\r\n  top: '0%',\r\n  left: 'auto',\r\n  right: '-6%',\r\n  height: '21px',\r\n  width: '6%',\r\n  color: 'black',\r\n};\r\n\r\nexport const styleSetInf = {\r\n  position: 'absolute',\r\n  marginTop: '15vh',\r\n  marginLeft: '24vh',\r\n  width: 340,\r\n  bgcolor: 'background.paper',\r\n  border: '3px solid #000',\r\n  borderColor: 'primary.main',\r\n  borderRadius: 2,\r\n  boxShadow: 24,\r\n  p: 1.5,\r\n};\r\n\r\n//=== MapGl =====================================================\r\n\r\nexport const styleSetPoint = {\r\n  position: 'absolute',\r\n  marginTop: '15vh',\r\n  marginLeft: '24vh',\r\n  width: 250,\r\n  bgcolor: 'background.paper',\r\n  border: '3px solid #000',\r\n  borderColor: 'primary.main',\r\n  borderRadius: 2,\r\n  boxShadow: 24,\r\n  p: 2,\r\n};\r\n\r\nexport const styleModalEndMapGl = {\r\n  position: 'absolute',\r\n  top: '0%',\r\n  left: 'auto',\r\n  right: '-9%',\r\n  maxHeight: '21px',\r\n  minHeight: '21px',\r\n  width: '6%',\r\n  color: 'black',\r\n};\r\n\r\nexport const styleModalMenu = {\r\n  fontSize: 17,\r\n  maxHeight: '21px',\r\n  minHeight: '21px',\r\n  //backgroundColor: '#F1F3F4',\r\n  backgroundColor: '#E6F5D6',\r\n  color: 'black',\r\n  marginRight: 1,\r\n  marginBottom: 2,\r\n  textTransform: 'unset !important',\r\n  textAlign: 'center',\r\n};\r\n//=== InputAdress =====================================================\r\nexport const styleSet = {\r\n  width: '230px',\r\n  maxHeight: '4px',\r\n  minHeight: '4px',\r\n  bgcolor: '#FAFAFA',\r\n  boxShadow: 24,\r\n  textAlign: 'center',\r\n  p: 1.5,\r\n};\r\n\r\nexport const styleInpKnop = {\r\n  fontSize: 13.3,\r\n  color: 'black',\r\n  maxHeight: '27px',\r\n  minHeight: '27px',\r\n  maxWidth: '62px',\r\n  minWidth: '62px',\r\n  backgroundColor: '#FFDB4D',\r\n  textTransform: 'unset !important',\r\n};\r\n\r\nexport const styleSetAdress = {\r\n  width: '319px',\r\n  height: '30px',\r\n  marginTop: '9vh',\r\n  marginLeft: '48px',\r\n};\r\n\r\nexport const styleBoxForm = {\r\n  '& > :not(style)': {\r\n    marginTop: '-9px',\r\n    marginLeft: '-12px',\r\n    width: '255px',\r\n  },\r\n};","import * as React from \"react\";\r\n\r\nimport Box from \"@mui/material/Box\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Modal from \"@mui/material/Modal\";\r\n\r\nimport { styleModalEnd, styleSetInf } from \"./../MainMapStyle\";\r\n\r\nconst MapRouteInfo = (props: {\r\n  activeRoute: any;\r\n  name1: string;\r\n  name2: string;\r\n  setOpen: any;\r\n}) => {\r\n  const [openSetInf, setOpenSetInf] = React.useState(true);\r\n\r\n  const handleCloseSetEndInf = () => {\r\n    props.setOpen(false);\r\n    setOpenSetInf(false);\r\n  };\r\n  let dlRoute1 = 0;\r\n  let tmRoute1 = \"\";\r\n  if (props.activeRoute) {\r\n    dlRoute1 = Math.round(props.activeRoute.properties.get(\"distance\").value);\r\n    let tm = props.activeRoute.properties.get(\"duration\").text;\r\n    tmRoute1 =\r\n      tm.substring(0, tm.length - 1) +\r\n      \" (\" +\r\n      Math.round(props.activeRoute.properties.get(\"duration\").value) +\r\n      \" сек)\";\r\n    console.log(\"1111\", props.activeRoute.properties.get(\"duration\"));\r\n  }\r\n  return (\r\n    <Modal open={openSetInf} onClose={handleCloseSetEndInf} hideBackdrop>\r\n      <Box sx={styleSetInf}>\r\n        <Button sx={styleModalEnd} onClick={handleCloseSetEndInf}>\r\n          <b>&#10006;</b>\r\n        </Button>\r\n        <Box>\r\n          <b>Начальная точка связи:</b>\r\n          <br />\r\n          {props.name1}\r\n          <br />\r\n          <b>Конечная точка связи:</b>\r\n          <br />\r\n          {props.name2}\r\n          <br />\r\n          <b>Длина связи: </b>\r\n          {dlRoute1} м<br />\r\n          <b>Время прохождения: </b>\r\n          {tmRoute1}\r\n          <br />\r\n        </Box>\r\n        {props.activeRoute && props.activeRoute.properties.get(\"blocked\") && (\r\n          <Box>Имеются участки с перекрытыми дорогами</Box>\r\n        )}\r\n      </Box>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default MapRouteInfo;\r\n","import * as React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nimport Grid from \"@mui/material/Grid\";\r\nimport Box from \"@mui/material/Box\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Modal from \"@mui/material/Modal\";\r\nimport TextField from \"@mui/material/TextField\";\r\n\r\nimport { styleSet, styleInpKnop, styleSetAdress } from \"./../MainMapStyle\";\r\nimport { styleBoxForm } from \"./../MainMapStyle\";\r\n\r\nconst MapInputAdress = (props: { iPoint: number; setOpen: any }) => {\r\n  //== Piece of Redux ======================================\r\n  let massdk = useSelector((state: any) => {\r\n    const { massdkReducer } = state;\r\n    return massdkReducer.massdk;\r\n  });\r\n  //========================================================\r\n  const [openSetAdress, setOpenSetAdress] = React.useState(true);\r\n \r\n  const [valuen, setValuen] = React.useState(\r\n    massdk[props.iPoint].nameCoordinates\r\n  );\r\n\r\n  const handleKey = (event: any) => {\r\n    if (event.key === \"Enter\") event.preventDefault();\r\n  };\r\n\r\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setValuen(event.target.value);\r\n  };\r\n\r\n  const handleCloseSetAdr = () => {\r\n    massdk[props.iPoint].nameCoordinates = valuen;\r\n    setOpenSetAdress(false);\r\n    props.setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Modal open={openSetAdress} onClose={handleCloseSetAdr} hideBackdrop>\r\n        <Grid item container sx={styleSetAdress}>\r\n          <Grid item xs={9.5} sx={{ border: 0 }}>\r\n            <Box sx={styleSet}>\r\n              <Box\r\n                component=\"form\"\r\n                sx={styleBoxForm}\r\n                noValidate\r\n                autoComplete=\"off\"\r\n              >\r\n                <TextField\r\n                  size=\"small\"\r\n                  onKeyPress={handleKey} //отключение Enter\r\n                  inputProps={{ style: { fontSize: 13.3 } }}\r\n                  value={valuen}\r\n                  onChange={handleChange}\r\n                  variant=\"standard\"\r\n                />\r\n              </Box>\r\n            </Box>\r\n          </Grid>\r\n          <Grid item xs sx={{ border: 0 }}>\r\n            <Box>\r\n              <Button\r\n                sx={styleInpKnop}\r\n                variant=\"contained\"\r\n                onClick={handleCloseSetAdr}\r\n              >\r\n                Ввод\r\n              </Button>\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n      </Modal>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default MapInputAdress;\r\n","import * as React from \"react\";\r\n\r\nimport Box from \"@mui/material/Box\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Modal from \"@mui/material/Modal\";\r\nimport Typography from \"@mui/material/Typography\";\r\n\r\nimport { styleModalEnd, styleSetInf } from \"./../MainMapStyle\";\r\n\r\nconst MapPointDataError = (props: { sErr: string; setOpen: any }) => {\r\n  const [openSetEr, setOpenSetEr] = React.useState(true);\r\n  const handleCloseSetEr = (event: any, reason: string) => {\r\n    if (reason !== \"backdropClick\") setOpenSetEr(false);\r\n  };\r\n\r\n  const handleCloseSetEndEr = () => {\r\n    props.setOpen(false);\r\n    setOpenSetEr(false);\r\n  };\r\n\r\n  return (\r\n    <Modal open={openSetEr} onClose={handleCloseSetEr} hideBackdrop>\r\n      <Box sx={styleSetInf}>\r\n        <Button sx={styleModalEnd} onClick={handleCloseSetEndEr}>\r\n          <b>&#10006;</b>\r\n        </Button>\r\n        <Typography variant=\"h6\" sx={{ textAlign: \"center\", color: \"red\" }}>\r\n          {props.sErr}\r\n        </Typography>\r\n      </Box>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default MapPointDataError;\r\n","import * as React from \"react\";\r\n\r\nimport Box from \"@mui/material/Box\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Modal from \"@mui/material/Modal\";\r\n\r\nimport { styleModalEnd, styleSetInf } from \"./../MainMapStyle\";\r\n\r\nconst MapRouteBind = (props: { setOpen: any }) => {\r\n  const [openSetBind, setOpenSetBind] = React.useState(true);\r\n\r\n  const handleCloseSetEndBind = () => {\r\n    props.setOpen(false);\r\n    setOpenSetBind(false);\r\n  };\r\n\r\n  return (\r\n    <Modal open={openSetBind} onClose={handleCloseSetEndBind} hideBackdrop>\r\n      <Box sx={styleSetInf}>\r\n        <Button sx={styleModalEnd} onClick={handleCloseSetEndBind}>\r\n          <b>&#10006;</b>\r\n        </Button>\r\n        <Box sx={{ textAlign: \"center\" }}>\r\n          <br />\r\n          <br />\r\n          <b>Здесь будет привязка направления</b>\r\n          <br /> <br />\r\n          <br />\r\n        </Box>\r\n      </Box>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default MapRouteBind;\r\n","//import * as React from \"react\";\r\n\r\nimport { Pointer, Router } from \"./../App\";\r\n\r\nexport const MapNewPoint = (coords: any, chNewCoord: number) => {\r\n  let masskPoint: Pointer = {\r\n    ID: 0,\r\n    coordinates: [],\r\n    nameCoordinates: \"\",\r\n    region: \"\",\r\n    area: \"\",\r\n    subarea: 0,\r\n    newCoordinates: 0,\r\n  };\r\n\r\n  masskPoint.ID = 0;\r\n  masskPoint.coordinates = coords;\r\n  masskPoint.nameCoordinates = \"Новая точка \" + String(chNewCoord);\r\n  masskPoint.region = \"\";\r\n  masskPoint.area = \"\";\r\n  masskPoint.subarea = 0;\r\n  masskPoint.newCoordinates = 1;\r\n  return masskPoint;\r\n};\r\n\r\nexport const RecordMassRoute = (\r\n  pointAcod: string,\r\n  pointBcod: string,\r\n  activeRoute: any\r\n) => {\r\n  let masskRoute: Router = {\r\n    region: 0,\r\n    start: \"\",\r\n    stop: \"\",\r\n    length: 0,\r\n    time: 0,\r\n  };\r\n  masskRoute.start = pointAcod;\r\n  masskRoute.stop = pointBcod;\r\n  if (activeRoute) {\r\n    masskRoute.time = Math.round(activeRoute.properties.get(\"duration\").value);\r\n    masskRoute.length = Math.round(\r\n      activeRoute.properties.get(\"distance\").value\r\n    );\r\n  }\r\n  return masskRoute;\r\n};\r\n\r\nexport const DecodingCoord = (coord: string) => {\r\n  return coord.split(\",\").map(Number);\r\n};\r\n\r\nexport const CodingCoord = (coord: Array<number>) => {\r\n  return String(coord[0]) + \",\" + String(coord[1]);\r\n};\r\n\r\nexport const CenterCoord = (aY: number, aX: number, bY: number, bX: number) => {\r\n  let coord0 = (aY - bY) / 2 + bY;\r\n  if (aY < bY) coord0 = (bY - aY) / 2 + aY;\r\n  let coord1 = (aX - bX) / 2 + bX;\r\n  if (aX < bX) coord1 = (bX - aX) / 2 + aX;\r\n  return [coord0, coord1];\r\n};\r\n\r\n//=== Placemark =====================================\r\n\r\nexport const getPointData = (\r\n  index: number,\r\n  pointAaIndex: number,\r\n  pointBbIndex: number,\r\n  massdk: any\r\n) => {\r\n  let textBalloon = \"\";\r\n  if (index === pointAaIndex) textBalloon = \"Начало\";\r\n  if (index === pointBbIndex) textBalloon = \"Конец\";\r\n  return {\r\n    hintContent: massdk[index].nameCoordinates, //balloonContent: PressBalloon(index), iconCaption: textBalloon,\r\n    iconContent: textBalloon,\r\n  };\r\n};\r\n\r\nexport const getPointOptions = (\r\n  index: number,\r\n  pointAaIndex: number,\r\n  pointBbIndex: number,\r\n  massdk: any\r\n) => {\r\n  let colorBalloon = \"islands#violetStretchyIcon\";\r\n  if (massdk[index].newCoordinates > 0)\r\n    colorBalloon = \"islands#darkOrangeStretchyIcon\";\r\n  if (index === pointAaIndex) colorBalloon = \"islands#redStretchyIcon\";\r\n  if (index === pointBbIndex) colorBalloon = \"islands#darkBlueStretchyIcon\";\r\n  return {\r\n    preset: colorBalloon,\r\n  };\r\n};\r\n\r\n//=== addRoute =====================================\r\n\r\nexport const getReferencePoints = (pointA: any, pointB: any) => {\r\n  return {\r\n    referencePoints: [pointA, pointB],\r\n  };\r\n};\r\n\r\nexport const getMultiRouteOptions = () => {\r\n  return {\r\n    routeActiveStrokeWidth: 5,\r\n    //routeActiveStrokeColor: \"#224E1F\",\r\n    routeStrokeWidth: 1.5,\r\n  };\r\n};\r\n\r\nexport const getMassPolyRouteOptions = () => {\r\n  return {\r\n    balloonCloseButton: false,\r\n    strokeColor: \"#1A9165\",\r\n    strokeWidth: 3,\r\n  };\r\n};\r\n\r\nexport const getMassMultiRouteOptions = () => {\r\n  return {\r\n    balloonCloseButton: false,\r\n    routeStrokeStyle: \"dot\",\r\n    strokeColor: \"#1A9165\",\r\n    routeActiveStrokeWidth: 3,\r\n    routeStrokeWidth: 0,\r\n  };\r\n};\r\n\r\nexport const getMassMultiRouteInOptions = () => {\r\n  return {\r\n    routeActiveStrokeWidth: 3,\r\n    routeStrokeStyle: \"dot\",\r\n    routeActiveStrokeColor: \"#E91427\",\r\n    routeStrokeWidth: 0,\r\n  };\r\n};\r\n\r\n//=== костыль ======================================\r\nlet a0 = {\r\n  region: 0,\r\n  start: \"55.7276995,36.8193915\",\r\n  stop: \"55.69928816060674,37.39474443074465\",\r\n  length: 56425,\r\n  time: 2792,\r\n};\r\nlet a1 = {\r\n  region: 0,\r\n  start: \"55.7276995,36.8193915\",\r\n  stop: \"55.60238311111584,36.483017680936115\",\r\n  length: 30452,\r\n  time: 1790,\r\n};\r\nlet a2 = {\r\n  region: 0,\r\n  start: \"55.7276995,36.8193915\",\r\n  stop: \"55.62968055298542,37.021400723452174\",\r\n  length: 22476,\r\n  time: 1430,\r\n};\r\nlet a3 = {\r\n  region: 0,\r\n  start: \"55.62968055298542,37.021400723452174\",\r\n  stop: \"55.69928816060674,37.39474443074465\",\r\n  length: 31326,\r\n  time: 1808,\r\n};\r\nlet a4 = {\r\n  region: 0,\r\n  start: \"55.69928816060674,37.39474443074465\",\r\n  stop: \"55.905786101735075,37.7174511711464\",\r\n  length: 46435,\r\n  time: 2667,\r\n};\r\nlet a5 = {\r\n  region: 0,\r\n  start: \"55.69928816060674,37.39474443074465\",\r\n  stop: \"55.913241655910504,37.8378230903432\",\r\n  length: 50578,\r\n  time: 2600,\r\n};\r\nlet a6 = {\r\n  region: 0,\r\n  start: \"55.913241655910504,37.8378230903432\",\r\n  stop: \"55.905786101735075,37.7174511711464\",\r\n  length: 11600,\r\n  time: 1174,\r\n};\r\nlet a7 = {\r\n  region: 0,\r\n  start: \"55.69928816060674,37.39474443074465\",\r\n  stop: \"55.65943211246696,37.92773938370481\",\r\n  length: 47717,\r\n  time: 2627,\r\n};\r\nlet a8 = {\r\n  region: 0,\r\n  start: \"55.65619605179316,38.10076639140717\",\r\n  stop: \"55.408054,36.7174221\",\r\n  length: 112201,\r\n  time: 6766,\r\n};\r\nlet a9 = {\r\n  region: 0,\r\n  start: \"55.60238311111584,36.483017680936115\",\r\n  stop: \"55.7276995,36.8193915\",\r\n  length: 32653,\r\n  time: 1924,\r\n};\r\nexport let massOtladka = [a0, a1, a2, a3, a4, a5, a6, a7, a8, a9];\r\n","import { MASSDK_CREATE } from './types';\r\nimport { massDk } from './../App';\r\n\r\nconst intialState = {\r\n  massdk: massDk,\r\n};\r\n\r\nexport const massdkReducer = (state = intialState, action: any) => {\r\n  //console.log('massfazReducer:', action);\r\n  switch (action.type) {\r\n    case MASSDK_CREATE:\r\n      return {\r\n        ...state,\r\n        massdk: action.data,\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { MASSROUTE_CREATE } from './types';\r\nimport { massRoute } from './../App';\r\n\r\nconst intialState = {\r\n  massroute: massRoute,\r\n};\r\n\r\nexport const massrouteReducer = (state = intialState, action: any) => {\r\n  //console.log('massfazReducer:', action);\r\n  switch (action.type) {\r\n    case MASSROUTE_CREATE:\r\n      return {\r\n        ...state,\r\n        massroute: action.data,\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { MAP_CREATE } from './types';\r\n\r\n//import { dateRpuGl } from './../App';\r\nimport { dateMapGl } from './../App';\r\n\r\nconst intialState = {\r\n  map: dateMapGl,\r\n};\r\n\r\nexport const mapReducer = (state = intialState, action: any) => {\r\n  //console.log('mapReducer:', action);\r\n  switch (action.type) {\r\n    case MAP_CREATE:\r\n      return {\r\n        ...state,\r\n        map: action.data,\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { combineReducers } from 'redux';\r\n//import { commReducer } from './commReducer';\r\nimport { massdkReducer } from './massdkReducer';\r\nimport { massrouteReducer } from './massrouteReducer';\r\nimport { mapReducer } from './mapReducer';\r\n\r\nexport const rootReducer = combineReducers({\r\n  //commReducer,\r\n  mapReducer,\r\n  massdkReducer,\r\n  massrouteReducer,\r\n});\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport { createStore } from 'redux';\r\nimport { rootReducer } from './redux/rootReducer';\r\nimport { Provider } from 'react-redux';\r\n\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nconst store = createStore(\r\n    rootReducer,\r\n    // compose(\r\n    //   applyMiddleware(\r\n    //     thunk,\r\n    //     spamFilter\r\n    //   ),\r\n    //   // window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__(),\r\n    // ),\r\n);\r\n\r\n\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <App />\r\n    </Provider>,\r\n    document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}